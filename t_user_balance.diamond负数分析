参照用户6060734
2016-11-2：拥有V钻30000
送礼：
1.6069119、581957b5d34e93ec5305100b：8888 ，送了3次
2.6069119、581957b5d34e93ec5305100b：888，送了3次
3.6069119、581957b5d34e93ec5305100b：188，送了2次
4.6069119、581957b5d34e93ec5305100b：88，送了1次
5.6069119、581957b5d34e93ec5305100b：18，1次
6.6069119、581957b5d34e93ec5305100b：1，2次


17339	6060734	0	0	ALIPAY		30	30	0	0	300	0		13395		2016-11-03 16:35:28.744
17338	6060734	0	0	ALIPAY		30	30	0	0	300	0		13394		2016-11-03 16:35:19.886
17337	6060734	0	0	ALIPAY		98	98	0	0	980	0		13392		2016-11-03 16:35:04.182
17336	6060734	0	0	ALIPAY		98	98	0	0	980	0		13390		2016-11-03 16:34:53.727
17334	6060734	0	0	ALIPAY		98	98	0	0	980	0		13389		2016-11-03 16:34:38.352
17332	6060734	0	0	ALIPAY		98	98	0	0	980	0		13388		2016-11-03 16:34:28.898
17331	6060734	0	0	ALIPAY		98	98	0	0	980	0		13387		2016-11-03 16:34:18.992
17330	6060734	0	0	ALIPAY		98	98	0	0	980	0		13386		2016-11-03 16:34:10.689
17329	6060734	0	0	ALIPAY		98	98	0	0	980	0		13385		2016-11-03 16:33:41.022
17328	6060734	0	0	ALIPAY		98	98	0	0	980	0		13384		2016-11-03 16:33:30.28
17327	6060734	0	0	ALIPAY		98	98	0	0	980	0		13383		2016-11-03 16:33:19.729
17326	6060734	0	0	ALIPAY		98	98	0	0	980	0		13382		2016-11-03 16:33:09.159
17325	6060734	0	0	ALIPAY		98	98	0	0	980	0		13381		2016-11-03 16:32:58.224
17324	6060734	0	0	ALIPAY		98	98	0	0	980	0		13380		2016-11-03 16:32:47.652
17323	6060734	0	0	ALIPAY		98	98	0	0	980	0		13379		2016-11-03 16:32:38.039
17321	6060734	0	0	ALIPAY		98	98	0	0	980	0		13378		2016-11-03 16:32:21.106
17272	6060734	0	0	ALIPAY		98	98	0	0	980	0		13342		2016-11-03 15:40:29.392
17271	6060734	0	0	ALIPAY		98	98	0	0	980	0		13341		2016-11-03 15:40:19.854
17270	6060734	0	0	ALIPAY		98	98	0	0	980	0		13339		2016-11-03 15:40:18.163
17269	6060734	0	0	ALIPAY		98	98	0	0	980	0		13340		2016-11-03 15:40:18.162
17268	6060734	0	0	ALIPAY		98	98	0	0	980	0		13338		2016-11-03 15:39:47.862
17267	6060734	0	0	ALIPAY		98	98	0	0	980	0		13337		2016-11-03 15:39:38.103
17266	6060734	0	0	ALIPAY		98	98	0	0	980	0		13336		2016-11-03 15:39:27.121
17265	6060734	0	0	ALIPAY		98	98	0	0	980	0		13334		2016-11-03 15:39:16.882
17209	6060734	0	0	ALIPAY		6	6	0	0	60	0		13298		2016-11-03 15:01:30.822
17208	6060734	0	0	ALIPAY		6	6	0	0	60	0		13297		2016-11-03 15:01:16.191
17207	6060734	0	0	ALIPAY		6	6	0	0	60	0		13296		2016-11-03 15:01:04.094
17206	6060734	0	0	ALIPAY		98	98	0	0	980	0		13294		2016-11-03 15:00:20.473
17204	6060734	0	0	ALIPAY		98	98	0	0	980	0		13293		2016-11-03 15:00:06.065
17203	6060734	0	0	ALIPAY		98	98	0	0	980	0		13292		2016-11-03 14:59:50.768
17202	6060734	0	0	ALIPAY		98	98	0	0	980	0		13291		2016-11-03 14:59:12.882
17201	6060734	0	0	ALIPAY		98	98	0	0	980	0		13290		2016-11-03 14:58:24.52
17198	6060734	0	0	ALIPAY		98	98	0	0	980	0		13285		2016-11-03 14:57:22.84
17196	6060734	0	0	ALIPAY		98	98	0	0	980	0		13284		2016-11-03 14:57:09.04
17195	6060734	0	0	ALIPAY		98	98	0	0	980	0		13283		2016-11-03 14:56:54.791
17194	6060734	0	0	ALIPAY		98	98	0	0	980	0		13282		2016-11-03 14:56:39.546
17193	6060734	0	0	ALIPAY		98	98	0	0	980	0		13281		2016-11-03 14:56:14.894



有问题的时间段：
1.12月23日晚上11点2016-12-23 21:35:00->11:23:40
2.2017-01-12 02:58:19.904Z-2017-01-12 03:08:31.200Z
sendgiftUser:6060734
roomId:5876804bd34e75742189b38e
api01:2017-01-12T04:03:49.229+0800: 647762.018: [GC (Allocation Failure) 2017-01-12T04:03:49.229+0800: 647762.018: [ParNew: 2559333K->19426K(2853312K), 0.1282002 secs] 3407833K->869307K(5974464K), 0.1283686 secs] [Times: user=0.48 sys=0.00, real=0.12 secs]
api02:2017-01-12T05:34:50.246+0800: 653339.729: [GC (Allocation Failure) 2017-01-12T05:34:50.246+0800: 653339.729: [ParNew: 2556800K->20132K(2853312K), 0.1343038 secs] 3413852K->878677K(5974464K), 0.1345143 secs] [Times: user=0.49 sys=0.00, real=0.14 secs]
api03:2017-01-12T03:24:44.114+0800: 727617.479: [GC (Allocation Failure) 2017-01-12T03:24:44.114+0800: 727617.479: [ParNew: 2553879K->21171K(2853312K), 0.1555542 secs] 3808987K->1277278K(5974464K), 0.1557345 secs] [Times: user=0.58 sys=0.00, real=0.16 secs]
api03:2017-01-12T05:55:09.515+0800: 736642.880: [GC (Allocation Failure) 2017-01-12T05:55:09.515+0800: 736642.880: [ParNew: 2557491K->15647K(2853312K), 0.1196228 secs] 3813598K->1272781K(5974464K), 0.1198069 secs] [Times: user=0.45 sys=0.00, real=0.12 secs]

结算流程.获取房间结算锁失败.主播[6433687]于时间[1484154262500]停播. 当前消息计数器[ 0]
结算流程.获取房间结算锁失败.主播[6154223]于时间[1484154701175]停播. 当前消息计数器[ 0]

用户[6060734]的余额不足购买数量[1]的ID为[57f9aee86dde204d83048451]礼物.






[2017-01-12 03:05:06] [ERROR][com.mosai.vliveshow.application.gift.impl.GiftGivingServiceImpl] - 用户[6060734]的余额不足购买数量[1]的ID为[57f9aee86dde204d83048451]礼物.
[2017-01-12 03:05:06] [DEBUG][com.mosai.vliveshow.api.app.infrastructure.redis.GiftGivingNotifyListener] - channel [__keyspace@0__:SENDGIFT_NOTIFY] message [rpop]
[2017-01-12 03:05:06] [DEBUG][com.mosai.vliveshow.api.app.infrastructure.redis.GiftGivingNotifyListener] - channel [__keyspace@0__:SENDGIFT_NOTIFY] message [rpush]
[2017-01-12 03:05:06] [DEBUG][com.mosai.vliveshow.api.app.infrastructure.redis.GiftGivingNotifyListener] - channel [__keyspace@0__:SENDGIFT_NOTIFY] message [rpop]
[2017-01-12 03:05:06] [DEBUG][com.mosai.vliveshow.api.app.infrastructure.redis.GiftGivingNotifyListener] - channel [__keyspace@0__:SENDGIFT_NOTIFY] message [rpush]
[2017-01-12 03:05:06] [DEBUG][com.mosai.vliveshow.api.app.infrastructure.redis.GiftGivingNotifyListener] - channel [__keyspace@0__:SENDGIFT_NOTIFY] message [rpop]
[2017-01-12 03:05:06] [DEBUG][com.mosai.vliveshow.api.app.infrastructure.redis.GiftGivingNotifyListener] - channel [__keyspace@0__:SENDGIFT_NOTIFY] message [rpush]
[2017-01-12 03:05:06] [DEBUG][com.mosai.vliveshow.api.app.infrastructure.redis.GiftGivingNotifyListener] - channel [__keyspace@0__:SENDGIFT_NOTIFY] message [rpush]
[2017-01-12 03:05:06] [DEBUG][com.mosai.vliveshow.api.app.infrastructure.redis.GiftGivingNotifyListener] - channel [__keyspace@0__:SENDGIFT_NOTIFY] message [rpop]
[2017-01-12 03:05:06] [DEBUG][com.mosai.vliveshow.api.app.infrastructure.redis.GiftGivingNotifyListener] - channel [__keyspace@0__:SENDGIFT_NOTIFY] message [rpush]
[2017-01-12 03:05:06] [DEBUG][com.mosai.vliveshow.api.app.infrastructure.redis.GiftGivingNotifyListener] - channel [__keyspace@0__:SENDGIFT_NOTIFY] message [rpop]
[2017-01-12 03:05:06] [DEBUG][com.mosai.vliveshow.api.app.infrastructure.redis.GiftGivingNotifyListener] - channel [__keyspace@0__:SENDGIFT_NOTIFY] message [rpush]
[2017-01-12 03:05:06] [DEBUG][com.mosai.vliveshow.api.app.infrastructure.redis.GiftGivingNotifyListener] - channel [__keyspace@0__:SENDGIFT_NOTIFY] message [rpush]
[2017-01-12 03:05:06] [DEBUG][com.mosai.vliveshow.api.app.infrastructure.redis.GiftGivingNotifyListener] - channel [__keyspace@0__:SENDGIFT_NOTIFY] message [rpop]
[2017-01-12 03:05:06] [DEBUG][com.mosai.vliveshow.api.app.infrastructure.redis.GiftGivingNotifyListener] - channel [__keyspace@0__:SENDGIFT_NOTIFY] message [rpop]
[2017-01-12 03:05:06] [DEBUG][com.mosai.vliveshow.api.app.infrastructure.redis.GiftGivingNotifyListener] - channel [__keyspace@0__:SENDGIFT_NOTIFY] message [rpush]
[2017-01-12 03:05:06] [DEBUG][com.mosai.vliveshow.api.app.infrastructure.redis.GiftGivingNotifyListener] - channel [__keyspace@0__:SENDGIFT_NOTIFY] message [rpush]
[2017-01-12 03:05:06] [DEBUG][com.mosai.vliveshow.api.app.infrastructure.redis.GiftGivingNotifyListener] - channel [__keyspace@0__:SENDGIFT_NOTIFY] message [rpop]
[2017-01-12 03:05:06] [DEBUG][com.mosai.vliveshow.api.app.infrastructure.redis.GiftGivingNotifyListener] - channel [__keyspace@0__:SENDGIFT_NOTIFY] message [rpush]
[2017-01-12 03:05:06] [DEBUG][com.mosai.vliveshow.api.app.infrastructure.redis.GiftGivingNotifyListener] - channel [__keyspace@0__:SENDGIFT_NOTIFY] message [rpop]
[2017-01-12 03:05:06] [DEBUG][com.mosai.vliveshow.api.app.infrastructure.redis.GiftGivingNotifyListener] - channel [__keyspace@0__:SENDGIFT_NOTIFY] message [rpush]
[2017-01-12 03:05:06] [DEBUG][com.mosai.vliveshow.api.app.infrastructure.redis.GiftGivingNotifyListener] - channel [__keyspace@0__:SENDGIFT_NOTIFY] message [rpop]
[2017-01-12 03:05:06] [DEBUG][com.mosai.vliveshow.api.app.infrastructure.redis.GiftGivingNotifyListener] - channel [__keyspace@0__:SENDGIFT_NOTIFY] message [rpush]
[2017-01-12 03:05:06] [DEBUG][com.mosai.vliveshow.api.app.infrastructure.redis.GiftGivingNotifyListener] - channel [__keyspace@0__:SENDGIFT_NOTIFY] message [rpush]
[2017-01-12 03:05:06] [DEBUG][com.mosai.vliveshow.api.app.infrastructure.redis.GiftGivingNotifyListener] - channel [__keyspace@0__:SENDGIFT_NOTIFY] message [rpop]
[2017-01-12 03:05:06] [DEBUG][com.mosai.vliveshow.api.app.infrastructure.redis.GiftGivingNotifyListener] - channel [__keyspace@0__:SENDGIFT_NOTIFY] message [rpush]
[2017-01-12 03:05:06] [DEBUG][com.mosai.vliveshow.api.app.infrastructure.redis.GiftGivingNotifyListener] - channel [__keyspace@0__:SENDGIFT_NOTIFY] message [rpop]
[2017-01-12 03:05:06] [DEBUG][com.mosai.vliveshow.api.app.infrastructure.redis.GiftGivingNotifyListener] - channel [__keyspace@0__:SENDGIFT_NOTIFY] message [rpush]
[2017-01-12 03:05:06] [DEBUG][com.mosai.vliveshow.api.app.infrastructure.redis.GiftGivingNotifyListener] - channel [__keyspace@0__:SENDGIFT_NOTIFY] message [rpush]
[2017-01-12 03:05:06] [DEBUG][com.mosai.vliveshow.api.app.infrastructure.redis.GiftGivingNotifyListener] - channel [__keyspace@0__:SENDGIFT_NOTIFY] message [rpop]
[2017-01-12 03:05:06] [DEBUG][com.mosai.vliveshow.api.app.infrastructure.redis.GiftGivingNotifyListener] - channel [__keyspace@0__:SENDGIFT_NOTIFY] message [rpop]
[2017-01-12 03:05:06] [DEBUG][com.mosai.vliveshow.api.app.infrastructure.redis.GiftGivingNotifyListener] - channel [__keyspace@0__:SENDGIFT_NOTIFY] message [rpush]
[2017-01-12 03:05:06] [DEBUG][com.mosai.vliveshow.api.app.infrastructure.redis.GiftGivingNotifyListener] - channel [__keyspace@0__:SENDGIFT_NOTIFY] message [rpop]
[2017-01-12 03:05:06] [DEBUG][com.mosai.vliveshow.api.app.infrastructure.redis.GiftGivingNotifyListener] - channel [__keyspace@0__:SENDGIFT_NOTIFY] message [rpush]
[2017-01-12 03:05:06] [DEBUG][com.mosai.vliveshow.api.app.infrastructure.redis.GiftGivingNotifyListener] - channel [__keyspace@0__:SENDGIFT_NOTIFY] message [rpush]
[2017-01-12 03:05:06] [DEBUG][com.mosai.vliveshow.api.app.infrastructure.redis.GiftGivingNotifyListener] - channel [__keyspace@0__:SENDGIFT_NOTIFY] message [rpop]
[2017-01-12 03:05:06] [DEBUG][com.mosai.vliveshow.api.app.infrastructure.redis.GiftGivingNotifyListener] - channel [__keyspace@0__:SENDGIFT_NOTIFY] message [rpush]
[2017-01-12 03:05:06] [DEBUG][com.mosai.vliveshow.api.app.infrastructure.redis.GiftGivingNotifyListener] - channel [__keyspace@0__:SENDGIFT_NOTIFY] message [rpush]
[2017-01-12 03:05:06] [DEBUG][com.mosai.vliveshow.api.app.infrastructure.redis.GiftGivingNotifyListener] - channel [__keyspace@0__:SENDGIFT_NOTIFY] message [rpop]
[2017-01-12 03:05:06] [DEBUG][com.mosai.vliveshow.api.app.infrastructure.redis.GiftGivingNotifyListener] - channel [__keyspace@0__:SENDGIFT_NOTIFY] message [rpop]
[2017-01-12 03:05:06] [DEBUG][com.mosai.vliveshow.api.app.infrastructure.redis.GiftGivingNotifyListener] - channel [__keyspace@0__:SENDGIFT_NOTIFY] message [rpush]
[2017-01-12 03:05:06] [DEBUG][com.mosai.vliveshow.api.app.infrastructure.redis.GiftGivingNotifyListener] - channel [__keyspace@0__:SENDGIFT_NOTIFY] message [rpush]
[2017-01-12 03:05:06] [DEBUG][com.mosai.vliveshow.api.app.infrastructure.redis.GiftGivingNotifyListener] - channel [__keyspace@0__:SENDGIFT_NOTIFY] message [rpop]
[2017-01-12 03:05:06] [DEBUG][com.mosai.vliveshow.api.app.infrastructure.redis.GiftGivingNotifyListener] - channel [__keyspace@0__:SENDGIFT_NOTIFY] message [rpop]
[2017-01-12 03:05:06] [DEBUG][com.mosai.vliveshow.api.app.infrastructure.redis.GiftGivingNotifyListener] - channel [__keyspace@0__:SENDGIFT_NOTIFY] message [rpop]
[2017-01-12 03:05:06] [DEBUG][com.mosai.vliveshow.api.app.infrastructure.redis.GiftGivingNotifyListener] - channel [__keyspace@0__:SENDGIFT_NOTIFY] message [rpop]
[2017-01-12 03:05:06] [DEBUG][com.mosai.vliveshow.api.app.infrastructure.redis.GiftGivingNotifyListener] - channel [__keyspace@0__:SENDGIFT_NOTIFY] message [rpop]
[2017-01-12 03:05:06] [DEBUG][com.mosai.vliveshow.api.app.infrastructure.redis.GiftGivingNotifyListener] - channel [__keyspace@0__:SENDGIFT_NOTIFY] message [rpop]
[2017-01-12 03:05:06] [DEBUG][com.mosai.vliveshow.api.app.infrastructure.redis.GiftGivingNotifyListener] - channel [__keyspace@0__:SENDGIFT_NOTIFY] message [rpop]
[2017-01-12 03:05:06] [DEBUG][com.mosai.vliveshow.api.app.infrastructure.redis.GiftGivingNotifyListener] - channel [__keyspace@0__:SENDGIFT_NOTIFY] message [rpop]
[2017-01-12 03:05:06] [DEBUG][com.mosai.vliveshow.api.app.infrastructure.redis.GiftGivingNotifyListener] - channel [__keyspace@0__:SENDGIFT_NOTIFY] message [del]
[2017-01-12 03:05:07] [DEBUG][org.springframework.data.mongodb.core.MongoTemplate] - find using query: { "living" : true} fields: null for class: class


java.net.SocketTimeoutException: Read timed out
	at java.net.SocketInputStream.socketRead0(Native Method)
	at java.net.SocketInputStream.socketRead(SocketInputStream.java:116)
	at java.net.SocketInputStream.read(SocketInputStream.java:170)
	at java.net.SocketInputStream.read(SocketInputStream.java:141)
	at sun.security.ssl.InputRecord.readFully(InputRecord.java:465)
	at sun.security.ssl.InputRecord.read(InputRecord.java:503)
	at sun.security.ssl.SSLSocketImpl.readRecord(SSLSocketImpl.java:973)
	at sun.security.ssl.SSLSocketImpl.readDataRecord(SSLSocketImpl.java:930)
	at sun.security.ssl.AppInputStream.read(AppInputStream.java:105)
	at java.io.BufferedInputStream.fill(BufferedInputStream.java:246)
	at java.io.BufferedInputStream.read1(BufferedInputStream.java:286)
	at java.io.BufferedInputStream.read(BufferedInputStream.java:345)
	at sun.net.www.http.HttpClient.parseHTTPHeader(HttpClient.java:704)
	at sun.net.www.http.HttpClient.parseHTTP(HttpClient.java:647)
	at sun.net.www.protocol.http.HttpURLConnection.getInputStream0(HttpURLConnection.java:1536)
	at sun.net.www.protocol.http.HttpURLConnection.getInputStream(HttpURLConnection.java:1441)
	at java.net.HttpURLConnection.getResponseCode(HttpURLConnection.java:480)
	at sun.net.www.protocol.https.HttpsURLConnectionImpl.getResponseCode(HttpsURLConnectionImpl.java:338)
	at com.google.api.client.http.javanet.NetHttpResponse.<init>(NetHttpResponse.java:37)
	at com.google.api.client.http.javanet.NetHttpRequest.execute(NetHttpRequest.java:94)
	at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:972)
	at com.mosai.vliveshow.helper.HttpHelper.buildPostRequest(HttpHelper.java:48)
	at com.mosai.vliveshow.application.qcloud.impl.QcloudServiceImpl.baseHttpRequest(QcloudServiceImpl.java:119)
	at com.mosai.vliveshow.application.qcloud.impl.QcloudServiceImpl.sendGroupMsg(QcloudServiceImpl.java:540)
	at sun.reflect.GeneratedMethodAccessor81.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:302)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:190)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:157)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:99)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:281)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:96)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:92)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:208)
	at com.sun.proxy.$Proxy66.sendGroupMsg(Unknown Source)
	at com.mosai.vliveshow.application.gift.impl.GiftGivingServiceImpl.giftGivingMsgHandle(GiftGivingServiceImpl.java:174)
	at sun.reflect.GeneratedMethodAccessor636.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:302)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:190)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:157)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:99)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:281)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:96)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:92)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:208)
	at com.sun.proxy.$Proxy101.giftGivingMsgHandle(Unknown Source)
	at com.mosai.vliveshow.api.app.infrastructure.redis.GiftGivingNotifyListener.onMessage(GiftGivingNotifyListener.java:43)
	at redis.clients.jedis.JedisPubSub.process(JedisPubSub.java:129)
	at redis.clients.jedis.JedisPubSub.proceed(JedisPubSub.java:102)
	at redis.clients.jedis.Jedis.subscribe(Jedis.java:2628)
	at com.mosai.vliveshow.api.app.infrastructure.redis.RedisPsubscribe$2.run(RedisPsubscribe.java:73)
	at java.lang.Thread.run(Thread.java:745)
[2017-01-12 03:05:20] [ERROR][com.mosai.vliveshow.application.gift.impl.GiftGivingServiceImpl] - 送礼流程处理失败. 数据缓存数据开始回滚.

[2017-01-12 03:05:20] [INFO][com.mosai.vliveshow.application.gift.impl.GiftGivingServiceImpl] - 送礼流程. 更新送礼用户Redis消费缓存信息成功.
[2017-01-12 03:05:20] [DEBUG][com.mosai.vliveshow.application.qcloud.impl.QcloudServiceImpl] - --------------qcloud sendGroupMsg requestBody--------------------{"Random":"6837322","MsgPriority":"High","MsgBody":[{"MsgContent":{"Ext":"","Data":"0&865&6060734&57ddf8666dde58e8c98fd5c3&http://www.vliveshow.com/vliveshow-api-app/v1/users/6060734/avatars.png&先生&送了一个奶瓶&9&1484161517323&http://asset.vliveshow.com/M00/00/EB/rBAOcVfd-ImAXRZ3AAAaIGHBohE482.png&0&Feeder&false&1.0&http://asset.vliveshow.com/M00/00/EB/rBAOcVfd-ImAXRZ3AAAaIGHBohE482.png&1&1"},"MsgType":"TIMCustomElem"}],"GroupId":"5876804bd34e75742189b38e"}
[2017-01-12 03:05:20] [INFO][com.mosai.vliveshow.application.gift.impl.GiftGivingServiceImpl] - 回滚[删除]ID为[6060734]在于
[2017-01-12 03:05:20] [INFO][com.mosai.vliveshow.application.gift.impl.GiftGivingServiceImpl] - 回滚ID为[6060734]用户的临时V钻[888]
[2017-01-12 03:05:20] [INFO][com.mosai.vliveshow.application.gift.impl.GiftGivingServiceImpl] - 回滚ID为[6069910]用户的临时V票[6216]
[2017-01-12 03:05:20] [ERROR][com.mosai.vliveshow.application.gift.impl.GiftGivingServiceImpl] - 送礼处理失败.null
java.lang.NullPointerException
[2017-01-12 03:05:20] [WARN][com.mosai.vliveshow.application.gift.impl.GiftGivingServiceImpl] - 送礼流程耗时：20736



1.充值成功后拥有9999*3+60=30057V钻，送礼成功（roomgift）30433V钻，多出376V钻
1.1 送礼，竞争锁成功
	1.1.1 判断余额、判断是否可以购买礼物：记录roomgift信息（有问题？？？？为什么roomgift的送礼V钻>>用户的真实V钻）
	1.1.2 记录user_diamond_userId 消费信息
				记录user_active_v_ticket_host 主播获取V票信息
				记录user_active_v_roomId 直播间获取V票信息
	1.1.3 发送IM消息

2.直播间结束
